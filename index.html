<!doctype html>
<!--[if IE 7 ]>    <html lang="es" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="es" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="es" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="es" class="no-js"> <!--<![endif]-->
<head>

    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <title>roootVector</title>
    <meta name="description" content="" />
    <meta name="keywords" content="" />



    <meta name ="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, width=device-width" />
    <meta name="apple-mobile-web-app-capable" content="yes"/>

    <!-- CSS -->


    <link rel="shortcut icon" type="image/ico" href="/favicon.ico" />
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">

    <!-- SCRIPTS -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="js/jquery.touchSwipe.min.js"></script>

    <!-- enable HTML5 elements in IE7+8 -->
    <!--[if lt IE 9]>
    <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <style>
        body{
            overflow: hidden;
            margin:0;
            padding: 0;
            position: relative;
        }
        h2{
            margin: 0;
        }
        .pantallas{
            position: absolute;
        }
        .item{
            float: left;
        }
        .item1{
            background:#ff0000;
        }
        .item4{
            background:#cc0000;
        }
        .item7{
            background:#aa0000;
        }
        .item2{
            background:#00ff00;
        }
        .item5{
            background:#00cc00;
        }
        .item8{
            background:#00aa00;
        }
        .item3{
            background:#0000ff;
        }
        .item6{
            background:#0000cc;
        }
        .item9{
            background:#0000aa;
        }
    </style>

</head>

<body>

<div class="pantallas"></div>

<script>
    function resizeSections (){


        windowWidth = $(window).width();
        windowHeight = $(window).height();

        $("body, .item").height(windowHeight);
        $("body, .item").width(windowWidth);

        $(".pantallas").height(windowHeight*3);
        $(".pantallas").width(windowWidth*3);

        correctLocation( true );

    }

    function correctLocation( immediate )
    {

        currentItem = $(".item" + current);


        if ( immediate )
        {


            $(".pantallas").animate({
                left: 0,
                top: 0
            }, 0);
            $(".pantallas").animate({
                left: -currentItem.offset().left,
                top: -currentItem.offset().top
            }, 0);

        }

    }


    $("document").ready(function () {

        windowWidth = $(window).width();
        windowHeight = $(window).height();
        current = 5;

        c = 9 / 3;

        $.get('templates/pantalla.html', function (html) {
            var template = $(html);

            var i = 0;
            $.ajax
            ({
                dataType: "json",
                url: "data/data.json",
                async: false,
                success: function (data) {


                    $.each(data.pantallas, function(property, valor) {

                        i++;

                        var temp = template.clone();

                        temp.addClass("item" + i);

                        temp.find('h2').text(valor.id);


                        $(temp).appendTo(".pantallas");


                    });



                }
            });

            //resize inicial
            resizeSections();

            //resize segÃºn evento
            $( window ).bind( 'resize', function ( event )
            {
                resizeSections();
            } );
        });


        $("body").keydown(function(e) {

            if(e.keyCode == 37) { // left
                if((-$(".pantallas").offset().left) > 0){
                    current = current-1;
                    $(".pantallas").animate({
                        left: "+=" + windowWidth
                    }, 300);
                }
                e.preventDefault();
            }
            else if(e.keyCode == 38) { // up
                if(current > 3){
                    current = current-3;
                    $(".pantallas").animate({
                        top: "+=" + windowHeight
                    }, 300);

                }
                e.preventDefault();
            }
            else if(e.keyCode == 39) { // right
                if((-$(".pantallas").offset().left) + windowWidth < $(".pantallas").width()){
                    current = current+1;
                    currentItem = $(".item" + current);
                    $(".pantallas").animate({
                        left: "-=" + windowWidth
                    }, 300);

                }
                e.preventDefault();
            }
            else if(e.keyCode == 40) { // down
                if((-$(".pantallas").offset().top) + windowHeight < $(".pantallas").height()){
                    current = current+3;
                    currentItem = $(".item" + current);
                    $(".pantallas").animate({
                        top: "-=" + windowHeight
                    }, 300);

                }
                e.preventDefault();
            }
        });

        $("body").swipe( {
            swipeLeft:function(event, direction, distance, duration, fingerCount) {
                $("body").trigger(
                    jQuery.Event( 'keydown', { keyCode: 39, which: 39 } )
                );
            },
            swipeRight:function(event, direction, distance, duration, fingerCount) {
                $("body").trigger(
                    jQuery.Event( 'keydown', { keyCode: 37, which: 37 } )
                );
            },
            swipeUp:function(event, direction, distance, duration, fingerCount) {
                $("body").trigger(
                    jQuery.Event( 'keydown', { keyCode: 40, which: 40 } )
                );
            },
            swipeDown:function(event, direction, distance, duration, fingerCount) {
                $("body").trigger(
                    jQuery.Event( 'keydown', { keyCode: 38, which: 38 } )
                );
            }
        });

    });
</script>
</body>
</html>